/* Minified Pyro File */
const{CommandInteraction,EmbedBuilder}=require("discord.js"),DB=require("../../Structures/Schemas/AFKSystem"),detectLang=require("../../Functions/Commands/Systems/detectLangSystem")["detectLang"];module.exports={name:"afk",description:"A multi-guilded afk",options:[{name:"set",type:1,description:"Sets your afk status.",options:[{name:"status",description:"Set your status.",type:3}]},{name:"return",type:1,description:"Return from being AFK."}],run:async(client,interaction)=>{const{guild,options,user,createdTimestamp}=interaction;var LangImport=await detectLang(guild.id),Lang=require(LangImport);const embed=(new EmbedBuilder).setThumbnail(user.displayAvatarURL({dynamic:!0})).setAuthor({name:user.tag});var afkStatus=options.getString("status");try{switch(options._subcommand){case"set":return await DB.findOneAndUpdate({GuildID:guild.id,UserID:user.id},{Status:afkStatus,Time:parseInt(createdTimestamp/1e3)},{upsert:!0}),embed.setColor("#008000").setDescription(""+Lang.afkSystem.setAfkStatus).setFields({name:""+Lang.afkSystem.setStatusAfk,value:afkStatus}).setFooter({text:""+Lang.afkSystem.setBotDoUserMentionAfk}),interaction.reply({embeds:[embed]});case"return":return await DB.deleteOne({GuildID:guild.id,UserID:user.id}),embed.setColor("#ff1c19").setDescription(""+Lang.afkSystem.removeAfkStatus),interaction.reply({embeds:[embed],ephemeral:!0})}}catch(err){console.error(err)}}};