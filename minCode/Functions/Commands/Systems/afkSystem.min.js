/* Minified Pyro File */
const DB=require("../../../Structures/Schemas/AFKSystem"),EmbedBuilder=require("discord.js")["EmbedBuilder"],detectLang=require("../../../Functions/Commands/Systems/detectLangSystem")["detectLang"];async function afkSystem(message){var LangImport=await detectLang(message.guild.id);const Lang=require("../"+LangImport);if(!message.author.bot&&(message.mentions.members.size||await DB.deleteOne({GuildID:message.guild.id,UserID:message.author.id}),message.mentions.members.size)){const Embed=(new EmbedBuilder).setColor("#ff1c19");message.mentions.members.forEach(m=>{DB.findOne({GuildID:message.guild.id,UserID:m.id},async(err,data)=>{if(err)throw err;if(data){const mapObj={user:m,time:`<t:${data.Time}:R>`,status:data.Status};return Embed.setDescription(Lang.afkSystem.mentionAfk.replace(/\b(?:user|time|status)\b/gi,matched=>mapObj[matched])).setThumbnail(m.avatarURL()),message.reply({embeds:[Embed]}).then(msg=>{setTimeout(()=>msg.delete(),5e3)})}})})}}module.exports={afkSystem:afkSystem};